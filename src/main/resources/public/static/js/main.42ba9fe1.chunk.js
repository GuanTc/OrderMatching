(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,a){},258:function(e,t,a){e.exports=a.p+"static/media/logo.f5304037.png"},273:function(e,t,a){e.exports=a(386)},278:function(e,t,a){},279:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},384:function(e,t,a){},386:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),i=a.n(l),s=(a(278),a(34)),c=a(35),o=a(46),u=a(45),m=a(47),d=a(23),h=(a(279),a(37)),g=a.n(h),f=a(68),p=a(92),b=a(232),E=a(233),y=a(262),O=a(77),k=a(80),v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={username:"",password:"",rememberMe:!0},e.showLoginSuccess=function(){e.props.messageManager.showSuccessMessage("Log in Success.",{displayTime:5e3})},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e,t){var a;this.setState((a={},Object(d.a)(a,e,t.target.value),Object(d.a)(a,"".concat(e,"Error"),!1),a))}},{key:"handleRememberMeCheck",value:function(e){this.setState({rememberMe:e.target.checked})}},{key:"handleLogin",value:function(){if(this.state.username&&this.state.password){var e=this,t=this.props.history,a=new URLSearchParams;a.append("username",this.state.username),a.append("password",this.state.password),g()({method:"post",url:"/user/login",data:a}).then(function(a){if(console.log("response: ",a.data.data),"SUCCESS"===a.data.status){e.showLoginSuccess();var n=a.data.data.username,r=a.data.data.userId;t.push({pathname:"/",state:{userName:n,userId:r}})}else alert(a.data.msg)}).catch(function(e){console.log("error: ",e)})}}},{key:"handleRegister",value:function(){this.props.history.push("/register")}},{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"content"},r.a.createElement(f.a,{className:"loginText",color:"primary",variant:"h2",align:"center"},"Login"),r.a.createElement(p.a,{value:this.state.username,onChange:this.handleChange.bind(this,"username"),label:"Please input your username",margin:"normal",autoFocus:!0,fullWidth:!0,required:!0}),r.a.createElement(p.a,{value:this.state.password,onChange:this.handleChange.bind(this,"password"),label:"Please input your password",type:"password",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement("div",{className:"minHeight"}),r.a.createElement("div",{className:"hide"},r.a.createElement(b.a,null,r.a.createElement(E.a,{control:r.a.createElement(y.a,{checked:this.state.rememberMe,onChange:this.handleRememberMeCheck.bind(this),color:"primary"}),label:"Remeber me"}))),r.a.createElement("div",{className:"footer"},r.a.createElement(O.a,{color:"primary",variant:"contained",style:{color:"white"},onClick:this.handleLogin.bind(this),className:"logFoot"},"Log in"),r.a.createElement(O.a,{color:"secondary",variant:"contained",style:{marginLeft:"50px",color:"white"},onClick:this.handleRegister.bind(this),className:"logFoot"},"Register"))))}}]),t}(n.Component),S=Object(k.injectMessageManager)(v),j=(a(300),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",name:""},a.handleRegister=function(e){if(a.state.username&&a.state.password){var t=a.props.history,n=new URLSearchParams;n.append("username",a.state.username),n.append("password",a.state.password),n.append("name",a.state.name),g()({method:"post",url:"/user/register",data:n}).then(function(e){console.log("response: ",e.data);var a=this.props.messageManager;"SUCCESS"===e.data.status?(a.showSuccessMessage(e.data.msg+"Please login.",{displayTime:5e3}),t.push("/login")):a.showErrorMessage(e.data.msg,{displayTime:5e3})}).catch(function(e){console.log("error: ",e)})}},a.handleReset=function(e){a.setState({username:"",password:"",name:""})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e,t){var a;this.setState((a={},Object(d.a)(a,e,t.target.value),Object(d.a)(a,"".concat(e,"Error"),!1),a))}},{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"content"},r.a.createElement(f.a,{className:"loginText",color:"primary",variant:"h2",align:"center"},"Register"),r.a.createElement(p.a,{value:this.state.username,onChange:this.handleChange.bind(this,"username"),label:"Please input your username",margin:"normal",autoFocus:!0,fullWidth:!0,required:!0}),r.a.createElement(p.a,{value:this.state.password,onChange:this.handleChange.bind(this,"password"),label:"Please input your password",type:"password",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(p.a,{value:this.state.name,onChange:this.handleChange.bind(this,"name"),label:"Please input your name",type:"name",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement("div",{className:"minHeight"}),r.a.createElement("div",{className:"footer"},r.a.createElement(O.a,{color:"primary",variant:"contained",style:{color:"white"},onClick:this.handleRegister.bind(this),className:"logFoot"},"Register"),r.a.createElement(O.a,{color:"secondary",variant:"contained",style:{marginLeft:"50px",color:"white"},onClick:this.handleReset.bind(this),className:"logFoot"},"Reset"))))}}]),t}(n.Component)),w=a(446),C=a(447),N=a(449),M=a(448),R=a(260),I=a(175),P=a.n(I),L=a(259),T=(a(301),a(198)),B=a(202),x=a(201),D=a(199),A=a(200),q=a(172),F=(a(197),a(234)),z=a.n(F),W=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={buyOrderBook:[],sellOrderBook:[],stockList:[],willMatchBobId:0,willMatchSobId:0,selectStock:0},e.query=function(){g.a.get("/buyOrderBook/findAll").then(function(t){console.log("response.data",t.data),e.setState({buyOrderBook:t.data.data.sort(e.compare("DESC","buyPrice"))})}),g.a.get("/sellOrderBook/findAll").then(function(t){e.setState({sellOrderBook:t.data.data.sort(e.compare("ASCE","askPrice"))})}),g.a.get("/stock/stockPrice").then(function(t){console.log("response.data",t.data),e.setState({stockList:t.data.data,selectStock:t.data.data[0].stock_Id})})},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.query()}},{key:"compare",value:function(e,t){return function(a,n){var r=a[t],l=n[t];return"DESC"===e?l-r:"ASCE"===e?r-l:void 0}}},{key:"handleData",value:function(e){var t=JSON.parse(e);console.log("result",t),"Buy"===t.msg&&this.setState({buyOrderBook:t.data.sort(this.compare("DESC","buyPrice")),willMatchBobId:-1}),"Sell"===t.msg&&this.setState({sellOrderBook:t.data.sort(this.compare("ASCE","askPrice")),willMatchSobId:-1}),"left"===t.msg&&this.setState({willMatchBobId:t.data.bobId}),"right"===t.msg&&this.setState({willMatchSobId:t.data.sobId})}},{key:"selectStock",value:function(e){this.setState({selectStock:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"orderBookAll",style:{marginRight:"20px"}},r.a.createElement(z.a,{url:"ws://localhost:8080/websocket",onMessage:this.handleData.bind(this)}),r.a.createElement(q.a,{className:"stockList"},r.a.createElement(f.a,{className:"orderText",variant:"h6",align:"center"},"Stock List"),r.a.createElement(T.a,{size:"small"},r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(x.a,{align:"right"},"Stock"),r.a.createElement(x.a,{align:"right"},"Code"),r.a.createElement(x.a,{align:"right"},"Buy"),r.a.createElement(x.a,{align:"right"},"Sell"))),r.a.createElement(B.a,null,this.state.stockList.map(function(t){return r.a.createElement(A.a,{key:t.stock_Id,onClick:function(){return e.selectStock(t.stock_Id)},selected:t.stock_Id===e.state.selectStock},r.a.createElement(x.a,{align:"right"},t.stockName),r.a.createElement(x.a,{align:"right"},t.stockCode),r.a.createElement(x.a,{align:"right"},t.buy_price),r.a.createElement(x.a,{align:"right"},t.sell_price))})))),r.a.createElement(q.a,{className:"orderBookList"},r.a.createElement(f.a,{className:"orderText",variant:"h6",align:"center"},"Order Book"),r.a.createElement("div",{className:"table"},r.a.createElement(T.a,{size:"small"},r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(x.a,{align:"center",colSpan:2},"Bid")),r.a.createElement(A.a,null,r.a.createElement(x.a,{align:"right"},"Qty"),r.a.createElement(x.a,{align:"right"},"Price"))),r.a.createElement(B.a,null,this.state.buyOrderBook.filter(function(t){return t.stockId===e.state.selectStock}).map(function(t){return r.a.createElement(A.a,{key:t.bobId,className:t.bobId===e.state.willMatchBobId?"willMatch":null},r.a.createElement(x.a,{align:"right"},t.buySize),r.a.createElement(x.a,{align:"right"},t.buyPrice))}))),r.a.createElement(T.a,{size:"small"},r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(x.a,{align:"center",colSpan:2},"Ask")),r.a.createElement(A.a,null,r.a.createElement(x.a,{align:"right"},"Price"),r.a.createElement(x.a,{align:"right"},"Qty"))),r.a.createElement(B.a,null,this.state.sellOrderBook.filter(function(t){return t.stockId===e.state.selectStock}).map(function(t){return r.a.createElement(A.a,{key:t.sobId,className:t.sobId===e.state.willMatchSobId?"willMatch":null},r.a.createElement(x.a,{align:"right"},t.askPrice),r.a.createElement(x.a,{align:"right"},t.askSize))}))))))}}]),t}(n.Component),U=a(261),V=a(183),Q=a(178),_=a(79),J=a(235),K=a.n(J),H=a(245),G=a.n(H),Y=a(255),$=a.n(Y),X=a(246),Z=a.n(X),ee=a(253),te=a.n(ee),ae=a(182),ne=a.n(ae),re=a(181),le=a.n(re),ie=a(247),se=a.n(ie),ce=a(248),oe=a.n(ce),ue=a(250),me=a.n(ue),de=a(251),he=a.n(de),ge=a(252),fe=a.n(ge),pe=a(256),be=a.n(pe),Ee=a(249),ye=a.n(Ee),Oe=a(254),ke=a.n(Oe),ve=a(257),Se=a.n(ve),je={Add:Object(n.forwardRef)(function(e,t){return r.a.createElement(G.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return r.a.createElement(Z.a,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return r.a.createElement(le.a,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return r.a.createElement(se.a,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return r.a.createElement(ne.a,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return r.a.createElement(oe.a,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return r.a.createElement(me.a,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(fe.a,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(ne.a,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(te.a,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return r.a.createElement(le.a,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return r.a.createElement(ke.a,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return r.a.createElement($.a,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return r.a.createElement(be.a,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return r.a.createElement(Se.a,Object.assign({},e,{ref:t}))})},we=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={data:[],userMap:{},stockMap:{}},e.getColumn=function(){return[{title:"User Name",field:"userId",type:"string",lookup:e.state.userMap},{title:"Stock Name",field:"stockId",type:"string",lookup:e.state.stockMap},{title:"Type",field:"type",type:"string",lookup:{B:"Buy",S:"Sell"}},{title:"Order Type",field:"orderType",type:"string",lookup:{MKT:"Market Order",LMT:"Limit Order",STP:"Stop Order",MIT:"Market if Touched",LIT:"Limit if Touched"}},{title:"Price",field:"price",type:"numeric"},{title:"Quantity",field:"qty",type:"numeric"},{title:"Remain Qty",field:"remainQty",type:"numeric",editable:"never"},{title:"Market Price",field:"marketPrice",type:"numeric"},{title:"Limit Price",field:"limitPrice",type:"numeric"},{title:"FOK",field:"fullOrKill",type:"numeric",lookup:{0:"Not FOK",1:"FOK"}},{title:"Duration",field:"duration",type:"string",lookup:{Day:"DAY",GTC:"GTC"}},{title:"Submit Date",field:"submitDate",type:"datetime",editable:"never"},{title:"Status",field:"status",type:"numeric",editable:"never",lookup:{0:"Not Submit",1:"Submitted",2:"Completed",3:"User Cancelled",4:"Over time",5:"System Cancelled"}}]},e.query=function(){g.a.get("/Order/findAll").then(function(t){e.setState({data:t.data.data})}),g.a.get("/Order/findAllUser").then(function(t){e.setState({userMap:JSON.parse(t.data.data)})}),g.a.get("/stock/findAllStock").then(function(t){e.setState({stockMap:JSON.parse(t.data.data)})})},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.query(),this.getColumn()}},{key:"render",value:function(){var e=this;return r.a.createElement(q.a,{className:"listRoot"},r.a.createElement(K.a,{icons:je,title:"Order List",id:"materialTable",style:{height:"100%"},data:this.state.data,columns:this.getColumn(),editable:{onRowAdd:function(t){return new Promise(function(a){setTimeout(function(){a();var n=Object(_.a)(e.state.data);n.push(t),e.setState(Object(Q.a)({},e.state,{data:n})),g()({method:"post",url:"/Order/add",data:t}).then(function(e){console.log("response: ",e.data.msg),"Add Success"!==e.data.msg&&alert(e.data.msg)}).catch(function(e){console.log("error: ",e)})},600)})},onRowDelete:function(t){return new Promise(function(a){setTimeout(function(){a();var n=Object(_.a)(e.state.data);n.splice(n.indexOf(t),1),e.setState(Object(Q.a)({},e.state,{data:n}))},600)})}},options:{filtering:!0,sorting:!0,headerStyle:{fontSize:"0.8rem",fontWeight:"bold"}}}))}}]),t}(n.Component),Ce=Object(k.injectMessageManager)(we),Ne=a(258),Me=a.n(Ne),Re=(a(384),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={tradeList:[]},e.query=function(){g.a.get("/trade/findAll").then(function(t){console.log("tradeList",t.data.data),e.setState({tradeList:t.data.data})})},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.query()}},{key:"render",value:function(){return r.a.createElement(q.a,{className:"orderBook"},r.a.createElement(f.a,{className:"orderText",variant:"h2",align:"center"},"Trade"),r.a.createElement(T.a,{size:"small"},r.a.createElement(D.a,null,r.a.createElement(A.a,null,r.a.createElement(x.a,{align:"right"},"Stock Name"),r.a.createElement(x.a,{align:"right"},"Buy Name"),r.a.createElement(x.a,{align:"right"},"Sell Name"),r.a.createElement(x.a,{align:"right"},"Price"),r.a.createElement(x.a,{align:"right"},"Quantity"),r.a.createElement(x.a,{align:"center"},"Trade Date"))),r.a.createElement(B.a,null,this.state.tradeList.map(function(e){return r.a.createElement(A.a,{key:e.tradeId},r.a.createElement(x.a,{align:"right"},e.stockName),r.a.createElement(x.a,{align:"right"},e.buyname),r.a.createElement(x.a,{align:"right"},e.sellname),r.a.createElement(x.a,{align:"right"},e.price),r.a.createElement(x.a,{align:"right"},e.qty),r.a.createElement(x.a,{align:"center"},e.tradeDate))}))))}}]),t}(n.Component)),Ie=(a(387),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tabValue:"order",open:!1,userName:"gtc",userId:0},a.onClose=function(e){console.log(e),a.setState({open:!1})},a.onOpen=function(){a.setState({open:!0})},a.handleChange=function(e,t){a.setState({tabValue:t})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.location.state.userId&&this.setState({userId:this.props.location.state.userId})}},{key:"onLogin",value:function(e){}},{key:"onLogout",value:function(){this.setState({userId:0})}},{key:"render",value:function(){return 0===this.state.userId?r.a.createElement(S,null):r.a.createElement("div",{className:"all"},r.a.createElement("div",{className:"user"},r.a.createElement("img",{src:Me.a,className:"img"}),r.a.createElement("div",{className:"link"},r.a.createElement("div",{className:"welcome"},"welcome, ",this.props.location.state.userName),r.a.createElement(O.a,{onClick:this.onLogout.bind(this),style:{padding:"6px 16px"}},"logout"))),r.a.createElement(U.a,{value:this.state.tabValue||"orderBook",onChange:this.handleChange,centered:!0},r.a.createElement(V.a,{label:"Order",value:"order"}),r.a.createElement(V.a,{label:"Trade",value:"trade"})),"order"===this.state.tabValue&&r.a.createElement("div",{className:"orders"},r.a.createElement(W,null),r.a.createElement(Ce,null)),"trade"===this.state.tabValue&&r.a.createElement(Re,null))}}]),t}(n.Component)),Pe=a(102),Le=Object(R.a)({palette:{primary:{light:"#5e69e8",main:"#1f224b",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#ec1f24",dark:"#ba000d",contrastText:"#000"}},status:{danger:P.a[900]},mixins:{toolbar:{minHeight:48}},typography:{button:{fontSize:"1rem",textTransform:"none"}}}),Te=function(e){function t(e){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(L.a,{theme:Le},r.a.createElement(N.a,{history:Object(Pe.a)()},r.a.createElement(w.a,null,r.a.createElement(C.a,{exact:!0,path:"/",component:Ie}),r.a.createElement(C.a,{path:"/login",component:S}),r.a.createElement(C.a,{path:"/register",component:j}),r.a.createElement(M.a,{from:"/*",to:"/"}))))}}]),t}(n.Component),Be=Object(k.injectMessageManager)(Te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(k.MessageManagerProvider,{desktopView:!0},r.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[273,1,2]]]);
//# sourceMappingURL=main.42ba9fe1.chunk.js.map